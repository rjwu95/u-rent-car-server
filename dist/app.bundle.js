!function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=14)}([function(e,t){e.exports=require("sequelize")},function(e,t,r){"use strict";r.d(t,"a",(function(){return l})),r.d(t,"b",(function(){return O})),r.d(t,"c",(function(){return x})),r.d(t,"d",(function(){return q}));var n=r(0),o=r(3);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=p(e);if(t){var o=p(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return s(this,r)}}function s(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,e);var t=i(r);function r(){return a(this,r),t.apply(this,arguments)}return r}(n.Model);f.init({number:{type:n.DataTypes.STRING},status:{type:n.DataTypes.STRING},name:{type:n.DataTypes.STRING},grade:{type:n.DataTypes.STRING},gear:{type:n.DataTypes.STRING},fuel:{type:n.DataTypes.STRING},distance:{type:n.DataTypes.STRING},remainFuel:{type:n.DataTypes.STRING},birth:{type:n.DataTypes.DATE},remark:{type:n.DataTypes.TEXT},createdAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW},updatedAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW}},{sequelize:o.a,modelName:"cars"});var l=f;function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=h(e);if(t){var o=h(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return m(this,r)}}function m(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(r,e);var t=v(r);function r(){return d(this,r),t.apply(this,arguments)}return r}(n.Model);g.init({carId:{type:n.DataTypes.NUMBER},outerId:{type:n.DataTypes.NUMBER},renterId:{type:n.DataTypes.NUMBER},driverId:{type:n.DataTypes.NUMBER},departure:{type:n.DataTypes.DATE},arrive:{type:n.DataTypes.DATE},giveLocation:{type:n.DataTypes.STRING},carCheck:{type:n.DataTypes.STRING},initKm:{type:n.DataTypes.NUMBER},fee:{type:n.DataTypes.NUMBER},feeTable:{type:n.DataTypes.STRING},remark:{type:n.DataTypes.STRING},special:{type:n.DataTypes.STRING},createdAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW},updatedAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW}},{modelName:"contracts",sequelize:o.a});var O=g;function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){return(D=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=S(e);if(t){var o=S(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return j(this,r)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var P=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&D(e,t)}(r,e);var t=R(r);function r(){return T(this,r),t.apply(this,arguments)}return r}(n.Model);P.init({name:{type:n.DataTypes.STRING},birthday:{type:n.DataTypes.NUMBER},hp:{type:n.DataTypes.STRING},address:{type:n.DataTypes.STRING},detailAddress:{type:n.DataTypes.STRING},license:{type:n.DataTypes.STRING},licenseType:{type:n.DataTypes.NUMBER},licenseDate:{type:n.DataTypes.DATE},postcode:{type:n.DataTypes.STRING},createdAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW},updatedAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW}},{sequelize:o.a,modelName:"customers"});var x=P;function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,n=k(e);if(t){var o=k(this).constructor;r=Reflect.construct(n,arguments,o)}else r=n.apply(this,arguments);return A(this,r)}}function A(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var G=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(r,e);var t=_(r);function r(){return I(this,r),t.apply(this,arguments)}return r}(n.Model);G.init({loginId:{type:n.DataTypes.STRING},password:{type:n.DataTypes.STRING},name:{type:n.DataTypes.STRING},createdAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW},updatedAt:{type:n.DataTypes.DATE,defaultValue:n.DataTypes.NOW}},{sequelize:o.a,modelName:"staffs"});var q=G;l.hasOne(O,{as:"contracts",foreignKey:"carId"}),q.hasOne(O,{as:"contracts",foreignKey:"outerId"}),x.hasOne(O,{as:"renter",foreignKey:"renterId"}),x.hasOne(O,{as:"driver",foreignKey:"driverId"}),O.belongsTo(l,{as:"car",foreignKey:"carId"}),O.belongsTo(q,{as:"outer",foreignKey:"outerId"}),O.belongsTo(x,{as:"renter",foreignKey:"renterId"}),O.belongsTo(x,{as:"driver",foreignKey:"driverId"})},function(e,t){e.exports=require("express")},function(e,t,r){"use strict";var n=r(0),o=r(7),u=r.n(o).a.production;t.a=new n.Sequelize(u.database,u.username,u.password,u)},function(e,t){e.exports=require("bcrypt")},function(e,t){e.exports=require("cors")},function(e,t){e.exports=require("jsonwebtoken")},function(e,t,r){r(17).config(),e.exports={development:{username:"postgres",password:"urentcargun",database:"u-rent-car-dev",host:"127.0.0.1",port:5434,dialect:"postgres",seederStorage:"sequelize",seederStorageTableName:"SequelizeData",logging:console.log},production:{username:process.env.DB_USER,password:process.env.DB_PASSWORD,database:process.env.DB,region:"ap-northeast-2",host:process.env.DB_HOST,port:process.env.DB_PORT,dialect:"postgres",seederStorage:"sequelize",seederStorageTableName:"SequelizeData",logging:!1}}},function(e,t){e.exports=require("body-parser")},function(e,t,r){"use strict";var n=r(2),o=r(1);function u(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){u(a,n,o,c,i,"next",e)}function i(e){u(a,n,o,c,i,"throw",e)}c(void 0)}))}}var c=Object(n.Router)();c.get("/",function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.query.page,e.prev=1,e.next=4,o.a.findAll({order:[["updatedAt","DESC"]]});case 4:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r.status(500).send({error:e.t0}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),c.get("/:id",function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.findOne({where:{id:Number(t.params.id)}});case 2:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c.post("/",function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,e.prev=1,e.next=4,o.a.create(n);case 4:return u=e.sent,e.abrupt("return",r.status(200).send(u));case 8:return e.prev=8,e.t0=e.catch(1),e.abrupt("return",r.status(500).send({error:e.t0}));case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t,r){return e.apply(this,arguments)}}()),c.patch("/",function(){var e=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.a.update(t.body,{where:{id:Number(t.body.id)}});case 2:return e.abrupt("return",r.status(200).send("success"));case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),t.a=c},function(e,t,r){"use strict";var n=r(2),o=r(1);function u(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function a(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?u(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):u(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function c(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,u=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,u=e}finally{try{n||null==c.return||c.return()}finally{if(o)throw u}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function p(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function a(e){p(u,n,o,a,c,"next",e)}function c(e){p(u,n,o,a,c,"throw",e)}a(void 0)}))}}var l=Object(n.Router)();l.get("/",function(){var e=f(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.findAll({attributes:["id","createdAt","departure","arrive"],include:[{model:o.c,as:"renter",attributes:["name","birthday","hp"]},{model:o.a,as:"car",attributes:["number","name"]},{model:o.d,as:"outer",attributes:["name"]}],order:[["updatedAt","DESC"]]});case 2:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),l.get("/:id",function(){var e=f(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.findOne({where:{id:Number(t.params.id)},include:[{model:o.c,as:"renter"},{model:o.c,as:"driver"},{model:o.a,as:"car"},{model:o.d,as:"outer"}]});case 2:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/",function(){var e=f(regeneratorRuntime.mark((function e(t,r){var n,u,c,s,p,f,l,y,d,b;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.body,u=n.renter,c=n.driver,s=n.car,e.next=3,Promise.all([o.c.create(u),o.a.findOne({where:{number:s.number}}),(null==c?void 0:c.name)&&o.c.create(c)]);case 3:if(p=e.sent,f=i(p,3),l=f[0],y=f[1],d=f[2],y){e.next=12;break}return e.next=11,o.a.create(t.body.car);case 11:y=e.sent;case 12:return e.next=14,o.b.create(a(a({},t.body),{},{renterId:l.id,carId:y.id,driverId:d?d.id:l.id}));case 14:return b=e.sent,e.abrupt("return",r.status(200).send(b));case 16:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),l.patch("/",function(){var e=f(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t.body),e.next=3,Promise.all([o.b.update(t.body,{where:{id:Number(t.body.id)}}),o.a.update(t.body.car,{where:{id:Number(t.body.car.id)}}),o.c.update(t.body.renter,{where:{id:Number(t.body.renter.id)}}),o.c.update(t.body.driver,{where:{id:Number(t.body.driver.id)}})]);case 3:return e.abrupt("return",r.status(200).send("success"));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),t.a=l},function(e,t,r){"use strict";var n=r(2),o=r(1);function u(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function a(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var a=e.apply(t,r);function c(e){u(a,n,o,c,i,"next",e)}function i(e){u(a,n,o,c,i,"throw",e)}c(void 0)}))}}var c=Object(n.Router)();c.get("/",function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.c.findAll({order:[["updatedAt","DESC"]]});case 3:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 7:return e.prev=7,e.t0=e.catch(0),e.abrupt("return",r.status(500).send({error:e.t0}));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,r){return e.apply(this,arguments)}}()),c.get("/:id",function(){var e=a(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.c.findOne({where:{id:Number(t.params.id)}});case 2:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),c.patch("/",function(){var e=a(regeneratorRuntime.mark((function e(t,r){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.c.update(t.body,{where:{id:Number(t.body.id)}});case 3:return e.abrupt("return",r.status(200).send("success"));case 6:return e.prev=6,e.t0=e.catch(0),e.abrupt("return",r.status(500).send(e.t0));case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t,r){return e.apply(this,arguments)}}()),t.a=c},function(e,t,r){"use strict";var n=r(2),o=r(1),u=r(4),a=r.n(u);function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach((function(t){s(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function s(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function f(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function a(e){p(u,n,o,a,c,"next",e)}function c(e){p(u,n,o,a,c,"throw",e)}a(void 0)}))}}var l=Object(n.Router)();function y(e){return new Promise((function(t,r){a.a.hash(e,process.env.SALT_ROUNDS,(function(e,n){e&&r(e),t(n)}))}))}l.get("/",function(){var e=f(regeneratorRuntime.mark((function e(t,r){var n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.findAll({attributes:["id","name","loginId"]});case 2:return n=e.sent,e.abrupt("return",r.status(200).send(n));case 4:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),l.post("/",function(){var e=f(regeneratorRuntime.mark((function e(t,r){var n,u;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.d.findOne({where:{loginId:t.body.loginId}});case 2:if(!e.sent){e.next=5;break}return e.abrupt("return",r.status(400).send("이미 사용중인 아이디입니다."));case 5:return e.next=7,y(t.body.password);case 7:return n=e.sent,e.next=10,o.d.create(i(i({},t.body),{},{password:n}));case 10:return u=e.sent,e.abrupt("return",r.status(200).send({id:u.id,loginId:u.loginId,name:u.name}));case 12:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),t.a=l},function(e,t,r){"use strict";var n=r(2),o=r(1),u=r(4),a=r.n(u),c=r(6),i=r.n(c);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function p(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){f(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function f(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function l(e,t,r,n,o,u,a){try{var c=e[u](a),i=c.value}catch(e){return void r(e)}c.done?t(i):Promise.resolve(i).then(n,o)}function y(e){return function(){var t=this,r=arguments;return new Promise((function(n,o){var u=e.apply(t,r);function a(e){l(u,n,o,a,c,"next",e)}function c(e){l(u,n,o,a,c,"throw",e)}a(void 0)}))}}var d=Object(n.Router)();function b(e,t){return new Promise((function(r,n){a.a.compare(e,t,(function(e,t){e&&n(e),t?r(t):n(t)}))}))}d.post("/login",function(){var e=y(regeneratorRuntime.mark((function e(t,r){var n,u,a,c,s,p;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app.get("jwt-secret"),e.next=3,o.d.findOne({attributes:["id","loginId","name","password"],where:{loginId:t.body.loginId}});case 3:if(u=e.sent){e.next=6;break}return e.abrupt("return",r.status(403).send("로그인 실패"));case 6:return e.prev=6,a=u.id,c=u.loginId,s=u.name,e.next=10,b(t.body.password,u.password);case 10:return p=i.a.sign({id:a,loginId:c,name:s},n,{expiresIn:14400}),e.abrupt("return",r.status(200).send({id:a,loginId:c,name:s,token:p}));case 14:return e.prev=14,e.t0=e.catch(6),console.log(e.t0),e.abrupt("return",r.status(403).send({message:"로그인 실패"}));case 18:case"end":return e.stop()}}),e,null,[[6,14]])})));return function(t,r){return e.apply(this,arguments)}}()),d.get("/me",function(){var e=y(regeneratorRuntime.mark((function e(t,r){var n,o;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.app.get("jwt-secret"),e.prev=1,o=i.a.verify(t.headers.token,n),e.abrupt("return",r.status(200).send(p(p({},o),{},{token:t.headers.token})));case 6:return e.prev=6,e.t0=e.catch(1),e.abrupt("return",r.status(401).send("세션 만료"));case 9:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(t,r){return e.apply(this,arguments)}}()),t.a=d},function(e,t,r){r(15),e.exports=r(16)},function(e,t){e.exports=require("@babel/polyfill")},function(e,t,r){"use strict";r.r(t);var n=r(5),o=r.n(n),u=r(2),a=r.n(u),c=r(3),i=r(8),s=r.n(i),p=a()();p.use(o()()),p.use(s.a.json());var f=process.env.PORT||3001;p.use("/api",r(18)),p.set("jwt-secret",process.env.JWT_SECRET),p.listen(f,(function(){console.log("The server is listening on port ".concat(f))})),p.use(o()()),c.a.authenticate().then((function(){return console.log("√ db connection success")})).catch((function(e){return console.log(e)}))},function(e,t){e.exports=require("dotenv")},function(e,t,r){"use strict";r.r(t),function(e){var t=r(2),n=r(9),o=r(10),u=r(11),a=r(12),c=r(13),i=Object(t.Router)();i.get("/",(function(e,t){t.status(200).send("route success")})),i.use("/cars",n.a),i.use("/contracts",o.a),i.use("/customers",u.a),i.use("/staffs",a.a),i.use("/auth",c.a),e.exports=i}.call(this,r(19)(e))},function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}}]);